<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DuckOnBoard - Find Your Perfect Gear</title>
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: #0A0A0A;
            color: #FFFFFF;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* ===== APP CONTAINER ===== */
        .app-container {
            max-width: 600px;
            margin: 0 auto;
            min-height: 100vh;
            background: #0A0A0A;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* ===== SCREENS ===== */
        .screen {
            display: none;
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 80px;
            overflow-y: auto;
            width: 100%;
        }

        .screen.active {
            display: flex;
            flex-direction: column;
        }

        /* ===== HEADER ===== */
        .screen-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .back-button {
            background: none;
            border: none;
            color: #00D9FF;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            transition: transform 0.2s;
        }

        .back-button:hover {
            transform: translateX(-4px);
        }

        .screen-title {
            font-size: 20px;
            font-weight: 600;
            flex: 1;
            text-align: center;
        }

        .screen-step {
            font-size: 14px;
            color: #999;
        }

        /* ===== LOGO ===== */
        .logo-container {
            text-align: center;
            margin: 40px 0;
        }

        .logo {
            font-size: 64px;
            margin-bottom: 12px;
        }

        .app-name {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #00D9FF, #0099CC);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .app-tagline {
            font-size: 16px;
            color: #999;
            font-weight: 400;
        }

        /* ===== CATEGORIES GRID ===== */
        .categories-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px 0;
        }

        .category-card {
            aspect-ratio: 1;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            padding: 20px;
            border: 2px solid transparent;
        }

        .category-card.active {
            opacity: 1;
        }

        .category-card.active:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(0, 217, 255, 0.3);
        }

        .category-card.inactive {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .category-icon {
            font-size: 56px;
            margin-bottom: 12px;
        }

        .category-name {
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            text-align: center;
            margin-bottom: 8px;
        }

        .category-badge {
            font-size: 11px;
            background: rgba(255, 165, 0, 0.9);
            padding: 4px 12px;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
        }

        /* Category-specific gradients */
        .category-snowboard {
            background: linear-gradient(135deg, #00D9FF 0%, #0099CC 100%);
        }

        .category-ski {
            background: linear-gradient(135deg, #0099FF 0%, #0066CC 100%);
        }

        .category-kite {
            background: linear-gradient(135deg, #FF9944 0%, #CC7722 100%);
        }

        .category-wake {
            background: linear-gradient(135deg, #9966FF 0%, #6633CC 100%);
        }

        .category-surf {
            background: linear-gradient(135deg, #00CCAA 0%, #009988 100%);
        }

        .category-sup {
            background: linear-gradient(135deg, #44CC44 0%, #339933 100%);
        }

        .category-tennis {
            background: linear-gradient(135deg, #FF6699 0%, #CC4477 100%);
        }

        .category-bike {
            background: linear-gradient(135deg, #FF4444 0%, #CC2222 100%);
        }

        /* ===== FORM ELEMENTS ===== */
        .form-section {
            margin-bottom: 32px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            color: #CCCCCC;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .form-hint {
            font-size: 13px;
            color: #999;
            margin-top: 8px;
            line-height: 1.4;
        }

        /* Radio buttons - Gender */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 8px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 12px 16px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s;
        }

        .radio-option:hover {
            border-color: rgba(0, 217, 255, 0.3);
        }

        .radio-option input[type="radio"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .radio-option.checked {
            border-color: #00D9FF;
            background: rgba(0, 217, 255, 0.1);
        }

        /* Input fields */
        .input-group {
            margin-bottom: 24px;
        }

        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 14px 16px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #FFFFFF;
            transition: all 0.2s;
        }

        input[type="number"]:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: #00D9FF;
            background: rgba(0, 217, 255, 0.05);
        }

        /* Sliders */
        .slider-container {
            margin-top: 16px;
        }

        .slider-value {
            font-size: 24px;
            font-weight: 600;
            color: #00D9FF;
            margin-bottom: 12px;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #00D9FF;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 217, 255, 0.4);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #00D9FF;
            cursor: pointer;
            border: none;
        }

        /* Cards (Level, Style) */
        .cards-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .card {
            padding: 20px;
            border-radius: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.02);
        }

        .card:hover {
            border-color: rgba(0, 217, 255, 0.3);
        }

        .card.selected {
            border-color: #00D9FF;
            background: rgba(0, 217, 255, 0.1);
        }

        .card-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .card-description {
            font-size: 14px;
            color: #999;
            line-height: 1.4;
        }

        /* ===== BUTTONS ===== */
        .button-container {
            margin-top: auto;
            padding-top: 24px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            display: block;
            text-align: center;
            pointer-events: auto;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00D9FF, #0099CC);
            color: #0A0A0A;
            margin-bottom: 12px;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 217, 255, 0.4);
        }

        .btn-primary:disabled {
            background: #333;
            color: #666;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: none;
            color: #999;
            font-size: 14px;
            padding: 12px;
            opacity: 0.7;
        }

        .btn-secondary:hover:not(:disabled) {
            color: #CCC;
            opacity: 1;
        }

        .btn-secondary:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* ===== RESULTS ===== */
        .result-main {
            text-align: center;
            padding: 32px 20px;
            background: rgba(0, 217, 255, 0.05);
            border-radius: 16px;
            margin-bottom: 24px;
        }

        .result-label {
            font-size: 14px;
            color: #999;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 48px;
            font-weight: 700;
            color: #00D9FF;
            margin-bottom: 8px;
        }

        .result-range {
            font-size: 16px;
            color: #CCC;
        }

        .result-description {
            font-size: 14px;
            color: #999;
            margin-top: 12px;
        }

        .result-shopping {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .result-shopping h3 {
            font-size: 16px;
            margin-bottom: 12px;
            color: #CCC;
        }

        .result-shopping ul {
            list-style: none;
            padding: 0;
        }

        .result-shopping li {
            padding: 8px 0;
            color: #FFF;
            font-size: 15px;
        }

        .result-shopping li:before {
            content: "‚úÖ ";
            margin-right: 8px;
        }

        .result-technical {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .result-technical h3 {
            font-size: 16px;
            margin-bottom: 16px;
            color: #CCC;
        }

        .tech-param {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tech-param:last-child {
            border-bottom: none;
        }

        .tech-label {
            color: #999;
            font-size: 14px;
        }

        .tech-value {
            color: #FFF;
            font-size: 14px;
            font-weight: 500;
        }

        .toggle-technical {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #00D9FF;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 16px;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 24px;
        }

        .btn-action {
            padding: 16px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.02);
            color: #FFF;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-action:hover {
            border-color: #00D9FF;
            background: rgba(0, 217, 255, 0.1);
        }

        /* ===== TOAST ===== */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #00D9FF;
            color: #0A0A0A;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
        }

        /* ===== THEME TOGGLE ===== */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 20px;
            z-index: 100;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* ===== LIGHT THEME ===== */
        body.theme-light {
            background: #F5F5F5;
            color: #1A1A1A;
        }

        body.theme-light .app-container {
            background: #F5F5F5;
        }

        body.theme-light .screen-title,
        body.theme-light .form-label,
        body.theme-light .card-title,
        body.theme-light .result-value,
        body.theme-light .category-name,
        body.theme-light .tech-value {
            color: #1A1A1A;
        }

        body.theme-light .screen-header {
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        body.theme-light .form-hint,
        body.theme-light .card-description,
        body.theme-light .result-label,
        body.theme-light .result-range,
        body.theme-light .result-description,
        body.theme-light .tech-label,
        body.theme-light .screen-step {
            color: #666;
        }

        body.theme-light input[type="number"],
        body.theme-light input[type="text"] {
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(0, 0, 0, 0.1);
            color: #1A1A1A;
        }

        body.theme-light input::placeholder {
            color: #999;
        }

        body.theme-light .card {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.theme-light .result-shopping,
        body.theme-light .result-technical {
            background: rgba(0, 0, 0, 0.02);
        }

        body.theme-light .btn-action {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.1);
            color: #1A1A1A;
        }

        body.theme-light .radio-option {
            border-color: rgba(0, 0, 0, 0.1);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 375px) {
            .category-icon {
                font-size: 48px;
            }
            
            .category-name {
                font-size: 14px;
            }
            
            .categories-grid {
                gap: 12px;
            }
        }

        @media (min-width: 600px) {
            .screen {
                padding: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Theme Toggle -->
        <button class="theme-toggle" onclick="toggleTheme()">üåì</button>

        <!-- Toast Notification -->
        <div class="toast" id="toast"></div>

        <!-- SCREEN 1: WELCOME + LOGIN -->
        <div class="screen active" id="screen-welcome">
            <div class="logo-container">
                <div class="logo">ü¶Ü</div>
                <h1 class="app-name">DuckOnBoard</h1>
                <p class="app-tagline">Find Your Perfect Gear</p>
            </div>
            
            <div class="button-container" style="margin-top: 60px;">
                <button class="btn btn-primary" onclick="goToScreen('categories')">
                    Zacznij! üéØ
                </button>
                <button class="btn btn-secondary">
                    Zaloguj siƒô (opcjonalnie)
                </button>
            </div>
        </div>

        <!-- SCREEN 2: CATEGORIES -->
        <div class="screen" id="screen-categories">
            <div class="logo-container" style="margin: 20px 0;">
                <div class="logo" style="font-size: 48px;">ü¶Ü</div>
                <h2 style="font-size: 24px; margin-bottom: 8px;">Wybierz kategoriƒô:</h2>
            </div>

            <div class="categories-grid">
                <!-- Row 1: ACTIVE -->
                <div class="category-card active category-snowboard" onclick="selectCategory('snowboard')">
                    <div class="category-icon">üèÇ</div>
                    <div class="category-name">SNOWBOARD</div>
                </div>
                
                <div class="category-card active category-ski" onclick="selectCategory('ski')">
                    <div class="category-icon">‚õ∑Ô∏è</div>
                    <div class="category-name">SKI</div>
                </div>
                
                <!-- Row 2: SOON -->
                <div class="category-card inactive category-kite" onclick="selectCategory('kite')">
                    <div class="category-icon">ü™Å</div>
                    <div class="category-name">KITE</div>
                    <div class="category-badge">üöß SOON</div>
                </div>
                
                <div class="category-card inactive category-wake" onclick="selectCategory('wake')">
                    <div class="category-icon">üèÑ</div>
                    <div class="category-name">WAKE</div>
                    <div class="category-badge">üöß SOON</div>
                </div>
                
                <!-- Row 3: SOON -->
                <div class="category-card inactive category-surf" onclick="selectCategory('surf')">
                    <div class="category-icon">üèÑ</div>
                    <div class="category-name">SURF</div>
                    <div class="category-badge">üöß SOON</div>
                </div>
                
                <div class="category-card inactive category-sup" onclick="selectCategory('sup')">
                    <div class="category-icon">üèÑ</div>
                    <div class="category-name">SUP</div>
                    <div class="category-badge">üöß SOON</div>
                </div>
                
                <!-- Row 4: SOON -->
                <div class="category-card inactive category-tennis" onclick="selectCategory('tennis')">
                    <div class="category-icon">üéæ</div>
                    <div class="category-name">TENNIS</div>
                    <div class="category-badge">üöß SOON</div>
                </div>
                
                <div class="category-card inactive category-bike" onclick="selectCategory('bike')">
                    <div class="category-icon">üö¥</div>
                    <div class="category-name">BIKE</div>
                    <div class="category-badge">üöß SOON</div>
                </div>
            </div>
        </div>

        <!-- SCREEN 3: FORM 1/3 - BASIC DATA -->
        <div class="screen" id="screen-form1">
            <div class="screen-header">
                <button class="back-button" onclick="goBack()">‚Üê</button>
                <div class="screen-title">O Tobie</div>
                <div class="screen-step">[1/3]</div>
            </div>

            <!-- Gender (OPTIONAL) -->
            <div class="form-section">
                <label class="form-label">Kim jeste≈õ? (opcjonalnie)</label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="gender" value="female" onchange="updateRadioStyle()">
                        <span>Kobieta</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="gender" value="male" onchange="updateRadioStyle()">
                        <span>Mƒô≈ºczyzna</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="gender" value="other" onchange="updateRadioStyle()">
                        <span>Inne / Wolƒô nie podawaƒá</span>
                    </label>
                </div>
                <p class="form-hint">üí° Pomaga dok≈Çadniej dobraƒá d≈Çugo≈õƒá<br>Kobiety: -20 cm, Mƒô≈ºczy≈∫ni: -15 cm<br>Brak wyboru: u≈ºywamy ≈õredniej</p>
            </div>

            <!-- Weight -->
            <div class="form-section">
                <label class="form-label">Twoja waga (kg):</label>
                <div class="slider-container">
                    <div class="slider-value" id="weight-value">60 kg</div>
                    <input type="range" id="weight" min="15" max="200" value="60" 
                           oninput="updateSlider('weight', 'kg')" onchange="validateForm1()">
                </div>
            </div>

            <!-- Height -->
            <div class="form-section">
                <label class="form-label">Tw√≥j wzrost (cm):</label>
                <div class="slider-container">
                    <div class="slider-value" id="height-value">170 cm</div>
                    <input type="range" id="height" min="80" max="230" value="170" 
                           oninput="updateSlider('height', 'cm')" onchange="validateForm1()">
                </div>
            </div>

            <!-- Age -->
            <div class="form-section">
                <label class="form-label">Tw√≥j wiek:</label>
                <div class="slider-container">
                    <div class="slider-value" id="age-value">25 lat</div>
                    <input type="range" id="age" min="3" max="99" value="25" 
                           oninput="updateSlider('age', 'lat')" onchange="validateForm1()">
                </div>
            </div>

            <div class="button-container">
                <button class="btn btn-secondary" id="btn-skip-1" disabled onclick="skipToResults()">POMI≈É</button>
                <button class="btn btn-primary" id="btn-next-1" onclick="goToScreen('form2')">DALEJ ‚Üí</button>
            </div>
        </div>

        <!-- SCREEN 4: FORM 2/3 - LEVEL -->
        <div class="screen" id="screen-form2">
            <div class="screen-header">
                <button class="back-button" onclick="goBack()">‚Üê</button>
                <div class="screen-title">Poziom jazdy</div>
                <div class="screen-step">[2/3]</div>
            </div>

            <div class="form-section">
                <label class="form-label">Jaki jest Tw√≥j poziom?</label>
                <div class="cards-container">
                    <div class="card" onclick="selectLevel('beginner')">
                        <div class="card-icon">üå±</div>
                        <div class="card-title">POCZƒÑTKUJƒÑCY</div>
                        <div class="card-description">0-10 dni na desce/nartach</div>
                    </div>
                    
                    <div class="card" onclick="selectLevel('intermediate')">
                        <div class="card-icon">üéø</div>
                        <div class="card-title">≈öREDNIOZAAWANSOWANY</div>
                        <div class="card-description">10-30 dni, je≈∫dzisz pewnie</div>
                    </div>
                    
                    <div class="card" onclick="selectLevel('advanced')">
                        <div class="card-icon">‚ö°</div>
                        <div class="card-title">ZAAWANSOWANY</div>
                        <div class="card-description">30+ dni, r√≥≈ºne warunki</div>
                    </div>
                    
                    <div class="card" onclick="selectLevel('expert')">
                        <div class="card-icon">üî•</div>
                        <div class="card-title">EKSPERT</div>
                        <div class="card-description">Profesjonalista, instruktor</div>
                    </div>
                </div>
            </div>

            <div class="button-container">
                <button class="btn btn-secondary" onclick="skipToResults()">POMI≈É</button>
                <button class="btn btn-primary" id="btn-next-2" disabled onclick="goToScreen('form3')">DALEJ ‚Üí</button>
            </div>
        </div>

        <!-- SCREEN 5: FORM 3/3 - STYLE -->
        <div class="screen" id="screen-form3">
            <div class="screen-header">
                <button class="back-button" onclick="goBack()">‚Üê</button>
                <div class="screen-title">Styl jazdy</div>
                <div class="screen-step">[3/3]</div>
            </div>

            <div class="form-section">
                <label class="form-label">Jakiego rodzaju jazdƒô preferujesz?</label>
                <div class="cards-container" id="style-cards">
                    <!-- Will be populated based on category -->
                </div>
            </div>

            <div class="button-container">
                <button class="btn btn-secondary" onclick="skipToResults()">POMI≈É</button>
                <button class="btn btn-primary" id="btn-next-3" disabled onclick="calculateResults()">POKA≈ª WYNIKI üéØ</button>
            </div>
        </div>

        <!-- SCREEN 6: RESULTS -->
        <div class="screen" id="screen-results">
            <div class="screen-header">
                <button class="back-button" onclick="goToScreen('categories')">‚Üê</button>
                <div class="screen-title" id="results-title">TWOJA IDEALNA DESKA</div>
            </div>

            <!-- Main Result -->
            <div class="result-main">
                <div class="result-label">üìè D≈ÅUGO≈öƒÜ</div>
                <div class="result-value" id="result-length">156 cm</div>
                <div class="result-range" id="result-range">(zakres: 153-159 cm)</div>
                <div class="result-description" id="result-description">4 cm kr√≥tsze od wzrostu</div>
            </div>

            <!-- Shopping Advice -->
            <div class="result-shopping">
                <h3>üí¨ CZEGO SZUKAƒÜ W SKLEPIE:</h3>
                <ul id="shopping-advice">
                    <li>Deska all-mountain</li>
                    <li>Dla ≈õredniozaawansowanych</li>
                    <li>≈örednia twardo≈õƒá (medium)</li>
                </ul>
            </div>

            <!-- Technical Parameters (collapsible) -->
            <button class="toggle-technical" id="toggle-tech" onclick="toggleTechnical()">
                üîΩ Poka≈º parametry techniczne
            </button>
            
            <div class="result-technical" id="technical-params" style="display: none;">
                <h3>üìã PARAMETRY TECHNICZNE:</h3>
                <div class="tech-param">
                    <span class="tech-label">Typ:</span>
                    <span class="tech-value" id="tech-type">All-Mountain</span>
                </div>
                <div class="tech-param">
                    <span class="tech-label">Flex:</span>
                    <span class="tech-value" id="tech-flex">Medium (5/10)</span>
                </div>
                <div class="tech-param">
                    <span class="tech-label">Profil:</span>
                    <span class="tech-value" id="tech-profile">Hybrid</span>
                </div>
                <div class="tech-param">
                    <span class="tech-label">Shape:</span>
                    <span class="tech-value" id="tech-shape">Directional Twin</span>
                </div>
            </div>

            <!-- Hint if no gender selected -->
            <div id="gender-hint" style="display: none; padding: 16px; background: rgba(255, 165, 0, 0.1); border-radius: 12px; margin: 16px 0;">
                <p style="font-size: 14px; color: #FFA500;">üí° Wskaz√≥wka: Wynik obliczony na podstawie ≈õredniej. Podanie p≈Çci mo≈ºe daƒá dok≈Çadniejszy wynik!</p>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn-action" onclick="goToScreen('form1')">
                    ‚úèÔ∏è Edytuj moje dane
                </button>
                <button class="btn-action" onclick="startOver()">
                    üîÑ Zacznij od poczƒÖtku
                </button>
                <button class="btn-action">
                    üõí Kupiƒá sprzƒôt
                </button>
                <button class="btn-action">
                    üéø WynajƒÖƒá sprzƒôt
                </button>
                <button class="btn-action">
                    üéì Znale≈∫ƒá instruktora
                </button>
                <button class="btn-action" onclick="goToScreen('din-form')">
                    ‚öôÔ∏è Oblicz DIN
                </button>
            </div>
        </div>

        <!-- SCREEN 7: DIN FORM (OPTIONAL) -->
        <div class="screen" id="screen-din-form">
            <div class="screen-header">
                <button class="back-button" onclick="goToScreen('results')">‚Üê</button>
                <div class="screen-title">Ustawienie wiƒÖza≈Ñ (DIN)</div>
            </div>

            <div style="padding: 16px; background: rgba(255, 165, 0, 0.1); border-radius: 12px; margin-bottom: 24px;">
                <p style="font-size: 14px; line-height: 1.5;">DIN to ustawienie si≈Çy wypiƒôcia wiƒÖza≈Ñ narciarskich.</p>
            </div>

            <!-- Boot Size -->
            <div class="form-section">
                <label class="form-label">Rozmiar buta (Mondo):</label>
                <input type="number" id="boot-size" placeholder="np. 27" step="0.5" min="20" max="35">
                <p class="form-hint">üí° Mondo ‚âà EU minus 7 (EU 42 ‚âà Mondo 27)</p>
            </div>

            <!-- Skier Type -->
            <div class="form-section">
                <label class="form-label">Typ narciarza:</label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="skier-type" value="cautious" onchange="updateRadioStyle()">
                        <span>Ostro≈ºny (wolƒô bezpiecze≈Ñstwo)</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="skier-type" value="average" onchange="updateRadioStyle()">
                        <span>Przeciƒôtny (normalny styl)</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="skier-type" value="aggressive" onchange="updateRadioStyle()">
                        <span>Agresywny (szybko, ostro)</span>
                    </label>
                </div>
            </div>

            <div style="padding: 16px; background: rgba(255, 0, 0, 0.1); border-radius: 12px; margin: 24px 0;">
                <p style="font-size: 13px; line-height: 1.5; color: #FF6666;">‚ö†Ô∏è WA≈ªNE: To TYLKO orientacyjna warto≈õƒá! Finalne ustawienie robi SERWIS w sklepie narciarskim.</p>
            </div>

            <div class="button-container">
                <button class="btn btn-secondary" onclick="goToScreen('results')">Anuluj</button>
                <button class="btn btn-primary" onclick="calculateDIN()">OBLICZ DIN ‚Üí</button>
            </div>
        </div>

        <!-- SCREEN 8: DIN RESULTS -->
        <div class="screen" id="screen-din-results">
            <div class="screen-header">
                <button class="back-button" onclick="goToScreen('results')">‚Üê</button>
                <div class="screen-title">‚öôÔ∏è USTAWIENIE WIƒÑZA≈É</div>
            </div>

            <div class="result-main">
                <div class="result-label">üéØ ZALECANE DIN:</div>
                <div class="result-value" id="din-value">6.5</div>
                <div class="result-range" id="din-range">(zakres: 6.0 - 7.0)</div>
            </div>

            <div class="result-shopping">
                <h3>Na podstawie:</h3>
                <ul id="din-basis">
                    <li>Waga: 75 kg</li>
                    <li>Rozmiar buta: 27 Mondo</li>
                    <li>Typ: Przeciƒôtny</li>
                    <li>Wiek: 35 lat</li>
                </ul>
            </div>

            <div style="padding: 20px; background: rgba(255, 0, 0, 0.1); border-radius: 12px; margin: 24px 0;">
                <h3 style="font-size: 16px; margin-bottom: 12px; color: #FF6666;">‚ö†Ô∏è BARDZO WA≈ªNE:</h3>
                <p style="font-size: 14px; line-height: 1.6;">
                    To TYLKO orientacyjna warto≈õƒá do rozmowy z serwisem!<br><br>
                    Finalne ustawienie DIN MUSI wykonaƒá certyfikowany SERWIS w sklepie narciarskim podczas monta≈ºu wiƒÖza≈Ñ.<br><br>
                    Nieprawid≈Çowe DIN = ryzyko powa≈ºnej kontuzji kolana!<br><br>
                    <strong>Nie pr√≥buj ustawiaƒá samodzielnie!</strong>
                </p>
            </div>

            <div class="action-buttons">
                <button class="btn-action" onclick="copyDIN()">
                    üìã Skopiuj DIN
                </button>
                <button class="btn-action" onclick="goToScreen('results')">
                    ‚Üê Wr√≥ƒá do wynik√≥w
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== STATE =====
        const state = {
            category: null,
            gender: null,
            weight: 60,
            height: 170,
            age: 25,
            level: null,
            style: null,
            screenHistory: []
        };

        // ===== NAVIGATION =====
        function goToScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            // Show target screen
            document.getElementById('screen-' + screenId).classList.add('active');
            
            // Save history
            const currentScreen = document.querySelector('.screen.active');
            if (currentScreen) {
                state.screenHistory.push(currentScreen.id);
            }
            
            // CRITICAL: Scroll to top
            window.scrollTo({ top: 0, behavior: 'instant' });
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
            
            const appContainer = document.querySelector('.app-container');
            if (appContainer) {
                appContainer.scrollTop = 0;
            }
        }

        function goBack() {
            const history = state.screenHistory;
            if (history.length > 1) {
                history.pop(); // Remove current
                const prevScreenId = history[history.length - 1].replace('screen-', '');
                goToScreen(prevScreenId);
            }
        }

        function startOver() {
            // Clear state
            state.category = null;
            state.level = null;
            state.style = null;
            state.screenHistory = [];
            
            // Reset forms
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            document.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
            
            goToScreen('welcome');
        }

        // ===== CATEGORY SELECTION =====
        function selectCategory(category) {
            if (['kite', 'wake', 'surf', 'sup', 'tennis', 'bike'].includes(category)) {
                showToast('üöß Ta kategoria jest w trakcie budowy! Coming soon.');
                return;
            }
            
            state.category = category;
            
            // Populate style cards based on category
            populateStyleCards(category);
            
            goToScreen('form1');
        }

        function populateStyleCards(category) {
            const container = document.getElementById('style-cards');
            
            const styles = {
                snowboard: [
                    { value: 'allmountain', icon: 'üèîÔ∏è', title: 'ALL-MOUNTAIN', desc: 'Wszƒôdzie - stok, r√≥≈ºne warunki' },
                    { value: 'freestyle', icon: 'üé™', title: 'FREESTYLE', desc: 'Skoki, trick\'i, park' },
                    { value: 'freeride', icon: '‚õ∞Ô∏è', title: 'FREERIDE', desc: 'Poza trasƒÖ, g≈Çƒôboki ≈õnieg' },
                    { value: 'powder', icon: '‚ùÑÔ∏è', title: 'POWDER', desc: 'Bardzo g≈Çƒôboki ≈õnieg' }
                ],
                ski: [
                    { value: 'allmountain', icon: 'üèîÔ∏è', title: 'ALL-MOUNTAIN', desc: 'Wszƒôdzie - stok, r√≥≈ºne warunki' },
                    { value: 'freestyle', icon: 'üé™', title: 'FREESTYLE', desc: 'Skoki, trick\'i, park' },
                    { value: 'freeride', icon: '‚õ∞Ô∏è', title: 'FREERIDE', desc: 'Poza trasƒÖ, g≈Çƒôboki ≈õnieg' },
                    { value: 'carving', icon: 'üèÅ', title: 'CARVING', desc: 'Szybkie przejazdy, slalom' },
                    { value: 'touring', icon: 'ü•æ', title: 'TOURING', desc: 'Skitouring, wyprawy' }
                ]
            };
            
            const categoryStyles = styles[category] || styles.snowboard;
            
            container.innerHTML = categoryStyles.map(s => `
                <div class="card" onclick="selectStyle('${s.value}')">
                    <div class="card-icon">${s.icon}</div>
                    <div class="card-title">${s.title}</div>
                    <div class="card-description">${s.desc}</div>
                </div>
            `).join('');
        }

        // ===== FORM INPUTS =====
        function updateSlider(id, unit) {
            const value = document.getElementById(id).value;
            document.getElementById(id + '-value').textContent = value + ' ' + unit;
            
            state[id] = parseFloat(value);
            validateForm1();
        }

        function validateForm1() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const age = parseInt(document.getElementById('age').value);
            
            const valid = weight >= 15 && height >= 80 && age >= 3;
            
            document.getElementById('btn-next-1').disabled = !valid;
            document.getElementById('btn-skip-1').disabled = !valid;
            
            // Save gender (optional)
            const genderInput = document.querySelector('input[name="gender"]:checked');
            state.gender = genderInput ? genderInput.value : null;
        }

        function updateRadioStyle() {
            // Update radio button visual state
            document.querySelectorAll('.radio-option').forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                if (radio.checked) {
                    option.classList.add('checked');
                } else {
                    option.classList.remove('checked');
                }
            });
            
            validateForm1();
        }

        // ===== LEVEL SELECTION =====
        function selectLevel(level) {
            state.level = level;
            
            // Update UI
            document.querySelectorAll('#screen-form2 .card').forEach(c => c.classList.remove('selected'));
            event.target.closest('.card').classList.add('selected');
            
            document.getElementById('btn-next-2').disabled = false;
        }

        // ===== STYLE SELECTION =====
        function selectStyle(style) {
            state.style = style;
            
            // Update UI
            document.querySelectorAll('#screen-form3 .card').forEach(c => c.classList.remove('selected'));
            event.target.closest('.card').classList.add('selected');
            
            document.getElementById('btn-next-3').disabled = false;
        }

        // ===== SKIP TO RESULTS =====
        function skipToResults() {
            // Set defaults
            if (!state.level) state.level = 'intermediate';
            if (!state.style) state.style = 'allmountain';
            
            calculateResults();
        }

        // ===== CALCULATIONS =====
        function calculateResults() {
            const { category, gender, weight, height, age, level, style } = state;
            
            let length, rangeMin, rangeMax, description;
            
            if (category === 'ski') {
                // SKI ALGORITHM
                const result = calculateSkiLength(height, weight, age, gender, level, style);
                length = result.recommended;
                rangeMin = result.range.min;
                rangeMax = result.range.max;
                description = result.description;
            } else {
                // SNOWBOARD ALGORITHM (default)
                const result = calculateSnowboardLength(height, weight, age, level, style);
                length = result.recommended;
                rangeMin = result.range.min;
                rangeMax = result.range.max;
                description = result.description;
            }
            
            // Display results
            document.getElementById('result-length').textContent = length + ' cm';
            document.getElementById('result-range').textContent = `(zakres: ${rangeMin}-${rangeMax} cm)`;
            document.getElementById('result-description').textContent = description;
            
            // Update title
            const title = category === 'ski' ? '‚õ∑Ô∏è TWOJE IDEALNE NARTY' : 'üèÇ TWOJA IDEALNA DESKA';
            document.getElementById('results-title').textContent = title;
            
            // Shopping advice
            updateShoppingAdvice(category, level, style);
            
            // Technical params
            updateTechnicalParams(category, level, style);
            
            // Show gender hint if not selected
            document.getElementById('gender-hint').style.display = gender ? 'none' : 'block';
            
            goToScreen('results');
        }

        function calculateSkiLength(height, weight, age, gender, level, style) {
            let baseLength = height;
            
            // Step 1: Base (gender + level)
            if (level === 'beginner') {
                baseLength -= 20;
            } else if (level === 'intermediate') {
                if (gender === 'female') {
                    baseLength -= 20;
                } else if (gender === 'male') {
                    baseLength -= 15;
                } else {
                    baseLength -= 17; // Average
                }
            } else if (level === 'advanced') {
                if (gender === 'female') {
                    baseLength -= 15;
                } else if (gender === 'male') {
                    baseLength -= 10;
                } else {
                    baseLength -= 12;
                }
            } else if (level === 'expert') {
                baseLength -= 5;
            }
            
            // Step 2: Weight adjustment
            const multiplier = (gender === 'female') ? 0.85 : 0.9;
            const expectedWeight = (height - 100) * multiplier;
            
            if (weight > expectedWeight * 1.2) {
                baseLength += 5;
            } else if (weight < expectedWeight * 0.8) {
                baseLength -= 5;
            }
            
            // Step 3: Style adjustment
            if (style === 'freestyle') {
                baseLength -= 5;
            } else if (style === 'freeride') {
                baseLength += 5;
            } else if (style === 'carving') {
                baseLength -= 5;
            }
            
            const skiLength = Math.round(baseLength);
            const diff = height - skiLength;
            
            let desc = `${diff} cm kr√≥tsze od wzrostu`;
            if (diff >= 20) desc = `${diff} cm kr√≥tsze (do brody)`;
            else if (diff >= 15) desc = `${diff} cm kr√≥tsze (do nosa)`;
            
            return {
                recommended: skiLength,
                range: { min: skiLength - 5, max: skiLength + 5 },
                description: desc
            };
        }

        function calculateSnowboardLength(height, weight, age, level, style) {
            let baseLength = height - 15; // Start 15cm shorter
            
            // Age/level adjustment
            if (age < 15) {
                baseLength = height - 25; // Kids shorter
            } else if (level === 'beginner') {
                baseLength -= 5;
            } else if (level === 'expert') {
                baseLength += 5;
            }
            
            // Weight adjustment
            const expectedWeight = (height - 100) * 0.9;
            if (weight > expectedWeight * 1.2) {
                baseLength += 3;
            } else if (weight < expectedWeight * 0.8) {
                baseLength -= 3;
            }
            
            // Style adjustment
            if (style === 'freestyle') {
                baseLength -= 3;
            } else if (style === 'freeride' || style === 'powder') {
                baseLength += 3;
            }
            
            const boardLength = Math.round(baseLength);
            const diff = height - boardLength;
            
            return {
                recommended: boardLength,
                range: { min: boardLength - 3, max: boardLength + 3 },
                description: `${diff} cm kr√≥tsze od wzrostu`
            };
        }

        function updateShoppingAdvice(category, level, style) {
            const levelNames = {
                beginner: 'poczƒÖtkujƒÖcych',
                intermediate: '≈õredniozaawansowanych',
                advanced: 'zaawansowanych',
                expert: 'ekspert√≥w'
            };
            
            const styleNames = {
                allmountain: category === 'ski' ? 'Narty all-mountain' : 'Deska all-mountain',
                freestyle: category === 'ski' ? 'Narty freestyle' : 'Deska freestyle',
                freeride: category === 'ski' ? 'Narty freeride' : 'Deska freeride',
                powder: 'Deska powder',
                carving: 'Narty carving',
                touring: 'Narty touring'
            };
            
            const advice = [
                styleNames[style] || 'Uniwersalna',
                `Dla ${levelNames[level]}`,
                '≈örednia twardo≈õƒá (medium)'
            ];
            
            document.getElementById('shopping-advice').innerHTML = advice.map(a => `<li>${a}</li>`).join('');
        }

        function updateTechnicalParams(category, level, style) {
            // Simplified - would be more complex in real app
            const types = {
                allmountain: 'All-Mountain (uniwersalne)',
                freestyle: 'Freestyle (park)',
                freeride: 'Freeride (powder)',
                powder: 'Powder (g≈Çƒôboki ≈õnieg)',
                carving: 'Carving (slalom)',
                touring: 'Touring (skitouring)'
            };
            
            const flexes = {
                beginner: 'Soft (miƒôkkie, 3-4/10)',
                intermediate: 'Medium (≈õrednie, 5-6/10)',
                advanced: 'Medium-Stiff (7-8/10)',
                expert: 'Stiff (twarde, 8-9/10)'
            };
            
            document.getElementById('tech-type').textContent = types[style] || 'All-Mountain';
            document.getElementById('tech-flex').textContent = flexes[level] || 'Medium';
            document.getElementById('tech-profile').textContent = 'Hybrid (camber+rocker)';
            
            if (category === 'snowboard') {
                document.getElementById('tech-shape').textContent = 'Directional Twin';
            } else {
                document.getElementById('tech-shape').parentElement.style.display = 'none';
            }
        }

        function toggleTechnical() {
            const params = document.getElementById('technical-params');
            const btn = document.getElementById('toggle-tech');
            
            if (params.style.display === 'none') {
                params.style.display = 'block';
                btn.textContent = 'üîº Ukryj parametry techniczne';
            } else {
                params.style.display = 'none';
                btn.textContent = 'üîΩ Poka≈º parametry techniczne';
            }
        }

        // ===== DIN CALCULATION =====
        function calculateDIN() {
            const bootSize = parseFloat(document.getElementById('boot-size').value);
            const skierTypeInput = document.querySelector('input[name="skier-type"]:checked');
            
            if (!bootSize || !skierTypeInput) {
                showToast('‚ö†Ô∏è Wype≈Çnij wszystkie pola!');
                return;
            }
            
            const skierType = skierTypeInput.value;
            const { weight, age, level } = state;
            
            // Simplified DIN calculation
            let din = Math.floor(weight / 10);
            
            // Boot size adjustment
            if (bootSize < 25) din -= 0.5;
            if (bootSize > 31) din += 0.5;
            
            // Skier type
            if (skierType === 'cautious') din -= 1;
            if (skierType === 'aggressive') din += 1;
            
            // Age
            if (age >= 50) din -= 1;
            
            // Level
            if (level === 'beginner') din -= 0.5;
            
            // Limits
            if (din < 2) din = 2;
            if (din > 12) din = 12;
            
            // Round to 0.5
            din = Math.round(din * 2) / 2;
            
            // Display
            document.getElementById('din-value').textContent = din;
            document.getElementById('din-range').textContent = `(zakres: ${din - 0.5} - ${din + 0.5})`;
            
            const typeNames = { cautious: 'Ostro≈ºny', average: 'Przeciƒôtny', aggressive: 'Agresywny' };
            
            document.getElementById('din-basis').innerHTML = `
                <li>Waga: ${weight} kg</li>
                <li>Rozmiar buta: ${bootSize} Mondo</li>
                <li>Typ: ${typeNames[skierType]}</li>
                <li>Wiek: ${age} lat</li>
            `;
            
            goToScreen('din-results');
        }

        function copyDIN() {
            const din = document.getElementById('din-value').textContent;
            const range = document.getElementById('din-range').textContent;
            const text = `DIN: ${din} ${range}\n‚ö†Ô∏è ORIENTACYJNIE - finalne ustawienie robi SERWIS!`;
            
            navigator.clipboard.writeText(text).then(() => {
                showToast('‚úÖ Skopiowano do schowka!');
            });
        }

        // ===== THEME TOGGLE =====
        function toggleTheme() {
            document.body.classList.toggle('theme-light');
        }

        // ===== TOAST =====
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ===== INIT =====
        window.addEventListener('load', () => {
            validateForm1();
        });
    </script>
</body>
</html>
